План по реализации экспорта агриментов в xml файлы.

Бизнес требования.

Для интеграции с внешней системой необходимо регулярно
выгружать данные по полисам в файлы. Данные по каждому полису
должны быть выгружены в отдельные файлы. Формат файлов: xml.
Данные должны содержать все поля полиса, персон и рисков, а так же
рассчитанные премии.

Данные в файлы необходимо выгружать на регулярной основе, один раз в сутки.


Техническое описание.

1. Создать в корне проекта директорию export/agreements/xml,
в эту директорию будет осуществляться выгрузка.

2. Для реализации выгрузки агриментов в xml файлы будем использовать
background процесс (джоб).

3. При запуске джоба загружаем из базы в память только id
каждого агримента (это позволит не забивать память данными)
и по одному запускаем процесс загрузки и сохраняем в xml файл.

4. У файлов будут названия uuid.xml.

5. Если файл с таким названием уже существует просто переписываем
его содержимое.

6. Для тестирования джоба настроим запуск джоба раз в 5 минут
и проверяем работу джоба вручную.

7. Реализуем включалку/выключалку для джоба через свойство в
application.properties.
